<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Agustin IPTV - DASH Player</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.12/shaka-player.compiled.min.js"></script>
</head>
<body style="background-color: black; color: white; text-align: center;">
  <h2>Now Playing: MPEG-DASH Stream</h2>
  <video id="video" width="720" height="480" controls autoplay></video>

  <script>
    async function initPlayer() {
      const manifestUri = 'https://cdn-uw2-prod.tsv2.amagi.tv/linear/amg01352-dazzlenetworkph-dazzleph-samsungph/playlist.mpd';

      // The clearkey used (your provided values)
      const clearKey = {
        'keys': {
          'c95ed4c44b0b4f7fa1c6ebbbbaab21a1': '47635b8e885e19f2ccbdff078c207058'
        },
        'type': 'temporary'
      };

      const video = document.getElementById('video');
      const player = new shaka.Player(video);

      // Listen for errors
      player.addEventListener('error', e => console.error('Error:', e.detail));

      // Try loading the manifest
      try {
        await player.configure({
          drm: {
            clearKeys: clearKey.keys
          }
        });
        await player.load(manifestUri);
        console.log('Video loaded!');
      } catch (e) {
        console.error('Failed to load video:', e);
      }
    }

    // Initialize on load
    document.addEventListener('DOMContentLoaded', initPlayer);
  </script>
</body>
</html>
