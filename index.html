<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Agustin IPTV</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #111; color: #eee; }
    h1 { color: #00ffcc; }
    .channel { margin-bottom: 15px; }
    video { width: 100%; max-width: 600px; height: auto; }
    .title { font-weight: bold; font-size: 18px; margin-bottom: 5px; }
  </style>
</head>
<body>
  <h1>ðŸ“º Agustin IPTV Player</h1>
  <div id="channels">Loading channels...</div>

  <script>
    const m3uUrl = "https://raw.githubusercontent.com/Nitsuga14/IPTV-SITE/main/agustin.m3u";

    fetch(m3uUrl)
      .then(response => response.text())
      .then(data => {
        const lines = data.split("\n");
        const container = document.getElementById("channels");
        container.innerHTML = "";

        for (let i = 0; i < lines.length; i++) {
          if (lines[i].startsWith("#EXTINF")) {
            const titleMatch = lines[i].match(/tvg-name="([^"]+)"/);
            const title = titleMatch ? titleMatch[1] : "Untitled";
            const streamUrl = lines[i + 1]?.trim();

            const channelDiv = document.createElement("div");
            channelDiv.className = "channel";
            channelDiv.innerHTML = `
              <div class="title">${title}</div>
              <video controls src="${streamUrl}" poster="" preload="none"></video>
            `;
            container.appendChild(channelDiv);
          }
        }
      })
      .catch(err => {
        document.getElementById("channels").textContent = "Failed to load playlist.";
        console.error(err);
      });
  </script>
</body>
</html>
